<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shipment Tracking</title>
</head>
<body>
    <h1>Shipment Tracking</h1>
    <input type="text" id="trackingIdInput" placeholder="Enter Tracking ID">
    <button onclick="getTrackingStatus()">Track</button>
    <div id="trackingResult"></div>

    <script>
        const sheetId = '1dgiJYDErHtepcAHOFnrFFXPvRIPq8K0QCwkcAefK1n0'; // Replace with your actual Google Sheet ID
        const base = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?`;
        const query = encodeURIComponent('SELECT A, B'); // Adjust to fetch Tracking ID (A) and Status (B)
        const url = `${base}&tq=${query}`;
        let trackingData = [];

        // Fetch the data from Google Sheets when the page loads
        fetch(url)
            .then(res => res.text())
            .then(rep => {
                const json = JSON.parse(rep.substr(47).slice(0,-2));
                const rows = json.table.rows;
                trackingData = rows.map(row => ({
                    id: row.c[0].v,   // Tracking ID
                    status: row.c[1].v // Status
                }));
            })
            .catch(err => console.error('Error fetching data', err));

        function getTrackingStatus() {
            const inputId = document.getElementById('trackingIdInput').value.trim();
            const result = trackingData.find(entry => entry.id === inputId);

            if (result) {
                document.getElementById('trackingResult').innerHTML = `Status: ${result.status}`;
            } else {
                document.getElementById('trackingResult').innerHTML = 'Tracking ID not found.';
            }
        }
    </script>
</body>
</html>
